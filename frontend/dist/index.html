<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  
  <!-- Basic PWA Meta Tags -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="description" content="Plan your perfect trips with itinerary management, budget tracking, and Google Places integration. Works offline!" />
  <meta name="keywords" content="travel planner, trip planning, itinerary, budget tracker, travel app, offline travel" />
  <meta name="author" content="Travel Planner App" />
  
  <!-- PWA Theme Colors -->
  <meta name="theme-color" content="#3b82f6" />
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1f2937" />
  <meta name="background-color" content="#1f2937" />
  
  <!-- Apple PWA Meta Tags -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="Travel Planner" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="mobile-web-app-capable" content="yes" />
  
  <!-- Microsoft PWA Meta Tags -->
  <meta name="msapplication-TileColor" content="#3b82f6" />
  <meta name="msapplication-tap-highlight" content="no" />
  <meta name="msapplication-config" content="/browserconfig.xml" />
  
  <!-- Favicon and Icons -->
  <link rel="icon" type="image/png" href="/icons/icon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="/icons/icon-16x16.png" sizes="16x16" />
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <!-- Apple Touch Icons -->
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png" />
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-touch-icon-57x57.png" />
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-touch-icon-76x76.png" />
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-touch-icon-114x114.png" />
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-touch-icon-152x152.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon-180x180.png" />
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json" />
  
  <!-- Preconnect to external services -->
  <link rel="preconnect" href="https://maps.googleapis.com" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="dns-prefetch" href="https://maps.googleapis.com" />
  
  <!-- Open Graph Meta Tags for sharing -->
  <meta property="og:title" content="Travel Planner - Plan Your Perfect Trip" />
  <meta property="og:description" content="Organize your trips with itinerary management, budget tracking, and Google Places integration. Works offline!" />
  <meta property="og:image" content="/icons/og-image.png" />
  <meta property="og:url" content="https://your-domain.com" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Travel Planner" />
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Travel Planner - Plan Your Perfect Trip" />
  <meta name="twitter:description" content="Organize your trips with itinerary management, budget tracking, and Google Places integration. Works offline!" />
  <meta name="twitter:image" content="/icons/twitter-card.png" />
  
  <!-- Security Headers -->
  <meta http-equiv="X-Content-Type-Options" content="nosniff" />
  <meta http-equiv="X-Frame-Options" content="DENY" />
  <meta http-equiv="X-XSS-Protection" content="1; mode=block" />
  
  <title>Travel Planner - Plan Your Perfect Trip</title>
  
  <!-- Critical CSS for faster loading -->
  <style>
    /* Critical CSS for instant loading */
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      background-color: #f9fafb;
      color: #111827;
    }
    
    .dark body {
      background-color: #111827;
      color: #f9fafb;
    }
    
    /* Loading spinner */
    .loading-spinner {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 40px;
      height: 40px;
      border: 4px solid #e5e7eb;
      border-top: 4px solid #3b82f6;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: translate(-50%, -50%) rotate(0deg); }
      100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    
    /* Hide loading spinner when React loads */
    #root:not(:empty) + .loading-spinner {
      display: none;
    }
    
    /* PWA install prompt */
    .pwa-install-prompt {
      position: fixed;
      bottom: 20px;
      left: 20px;
      right: 20px;
      background: #3b82f6;
      color: white;
      padding: 16px;
      border-radius: 12px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      transform: translateY(100px);
      transition: transform 0.3s ease;
      z-index: 1000;
    }
    
    .pwa-install-prompt.show {
      transform: translateY(0);
    }
    
    .pwa-install-prompt button {
      background: white;
      color: #3b82f6;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      font-weight: 600;
      margin-left: 12px;
      cursor: pointer;
    }
    
    .pwa-install-prompt .close-btn {
      background: transparent;
      color: white;
      padding: 4px 8px;
      margin-left: 8px;
    }
  </style>
  <script type="module" crossorigin src="/assets/index-7dcd731b.js"></script>
  <link rel="stylesheet" href="/assets/index-497d9247.css">
<link rel="manifest" href="/manifest.webmanifest"><script id="vite-plugin-pwa:register-sw" src="/registerSW.js"></script></head>
<body>
  <!-- App container -->
  <div id="root"></div>
  
  <!-- Loading spinner (shown until React loads) -->
  <div class="loading-spinner"></div>
  
  <!-- PWA Install Prompt -->
  <div id="pwa-install-prompt" class="pwa-install-prompt">
    <div style="display: flex; align-items: center; justify-content: space-between;">
      <div>
        <strong>ðŸ“± Install Travel Planner</strong><br>
        <small>Add to home screen for quick access!</small>
      </div>
      <div>
        <button id="pwa-install-btn">Install</button>
        <button id="pwa-close-btn" class="close-btn">Ã—</button>
      </div>
    </div>
  </div>
  
  <!-- Offline notification -->
  <div id="offline-notification" style="
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: #f59e0b;
    color: white;
    padding: 8px 16px;
    text-align: center;
    transform: translateY(-100%);
    transition: transform 0.3s ease;
    z-index: 1001;
    font-size: 14px;
  ">
    ðŸ“¡ You're offline. Some features may be limited.
  </div>
  
  <!-- React app script -->
  
  
  <!-- PWA and Service Worker Registration -->
  <script>
    // Service Worker Registration
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', async () => {
        try {
          const registration = await navigator.serviceWorker.register('/sw.js');
          console.log('SW registered: ', registration);
          
          // Check for updates
          registration.addEventListener('updatefound', () => {
            const newWorker = registration.installing;
            newWorker.addEventListener('statechange', () => {
              if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                // New update available
                if (confirm('New version available! Reload to update?')) {
                  window.location.reload();
                }
              }
            });
          });
        } catch (error) {
          console.log('SW registration failed: ', error);
        }
      });
    }
    
    // PWA Install Prompt
    let deferredPrompt;
    const installPrompt = document.getElementById('pwa-install-prompt');
    const installBtn = document.getElementById('pwa-install-btn');
    const closeBtn = document.getElementById('pwa-close-btn');
    
    // Listen for install prompt
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      
      // Show install prompt after 3 seconds
      setTimeout(() => {
        if (!localStorage.getItem('pwa-install-dismissed')) {
          installPrompt.classList.add('show');
        }
      }, 3000);
    });
    
    // Handle install button click
    installBtn.addEventListener('click', async () => {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        console.log('PWA install outcome:', outcome);
        deferredPrompt = null;
      }
      installPrompt.classList.remove('show');
    });
    
    // Handle close button click
    closeBtn.addEventListener('click', () => {
      installPrompt.classList.remove('show');
      localStorage.setItem('pwa-install-dismissed', 'true');
    });
    
    // Hide prompt when app is installed
    window.addEventListener('appinstalled', () => {
      console.log('PWA installed successfully');
      installPrompt.classList.remove('show');
      localStorage.setItem('pwa-install-dismissed', 'true');
    });
    
    // Online/Offline Detection
    const offlineNotification = document.getElementById('offline-notification');
    
    const updateOnlineStatus = () => {
      if (navigator.onLine) {
        offlineNotification.style.transform = 'translateY(-100%)';
      } else {
        offlineNotification.style.transform = 'translateY(0)';
      }
    };
    
    window.addEventListener('online', updateOnlineStatus);
    window.addEventListener('offline', updateOnlineStatus);
    updateOnlineStatus();
    
    // Handle URL parameters for PWA shortcuts
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('action') === 'new-trip') {
      // Will be handled by React app
      sessionStorage.setItem('pwa-action', 'new-trip');
    }
    if (urlParams.get('page')) {
      sessionStorage.setItem('pwa-page', urlParams.get('page'));
    }
    
    // Performance monitoring
    window.addEventListener('load', () => {
      if ('performance' in window) {
        const perfData = performance.timing;
        const loadTime = perfData.loadEventEnd - perfData.navigationStart;
        console.log('Page load time:', loadTime + 'ms');
      }
    });
  </script>
  
  <!-- Structured Data for SEO -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "MobileApplication",
    "name": "Travel Planner",
    "description": "Plan your perfect trips with itinerary management, budget tracking, and Google Places integration",
    "applicationCategory": "TravelApplication",
    "operatingSystem": "Any",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "4.8",
      "ratingCount": "1200"
    }
  }
  </script>
</body>
</html>